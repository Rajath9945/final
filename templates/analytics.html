<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Class Analytics</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-slate-900 text-white min-h-screen p-10">

<a href="/" class="text-blue-400 underline mb-6 block">
    ‚Üê Back to Sessions
</a>

<h1 class="text-4xl font-extrabold text-center mb-2">
    üìä Class Attention Analytics
</h1>

<p class="text-center text-slate-300 mb-8">
    Analysis of {{ total_sessions }} sessions
</p>

<!-- ‚úÖ SUMMARY CARDS -->
<div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">

    <div class="bg-white/10 p-6 rounded-2xl text-center">
        <h2 class="text-lg font-semibold text-slate-300">Average Engagement</h2>
        <p class="text-4xl font-bold mt-2">{{ avg_engagement }}%</p>
    </div>

    <div class="bg-white/10 p-6 rounded-2xl text-center">
        <h2 class="text-lg font-semibold text-slate-300">Class Attention Grade</h2>
        <p class="text-4xl font-bold mt-2">{{ grade }}</p>
    </div>

</div>

<!-- ‚úÖ ENGAGEMENT BAR -->
<div class="max-w-6xl mx-auto bg-white/10 p-6 rounded-3xl mb-10">
    <h2 class="text-2xl font-semibold mb-4 text-center">
        Engagement per Session (%)
    </h2>
    <canvas id="barChart"></canvas>
</div>

<!-- ‚úÖ ENGAGEMENT TREND -->
<div class="max-w-6xl mx-auto bg-white/10 p-6 rounded-3xl mb-10">
    <h2 class="text-2xl font-semibold mb-4 text-center">
        Engagement Trend Over Sessions
    </h2>
    <canvas id="lineChart"></canvas>
</div>

<!-- ‚úÖ PHONE USAGE -->
<div class="max-w-6xl mx-auto bg-white/10 p-6 rounded-3xl">
    <h2 class="text-2xl font-semibold mb-4 text-center">
        Phone Usage per Session (%)
    </h2>
    <canvas id="phoneChart"></canvas>
</div>

<script>
const sessionIds = {{ session_ids | tojson }};
const engagementScores = {{ engagement_scores | tojson }};
const phoneScores = {{ phone_scores | tojson }};

// BAR CHART
new Chart(barChart, {
    type: "bar",
    data: {
        labels: sessionIds,
        datasets: [{
            data: engagementScores,
            backgroundColor: "#22d3ee"
        }]
    },
    options: {
        scales: { y: { beginAtZero: true, max: 100 } },
        plugins: { legend: { display: false } }
    }
});

// LINE CHART
new Chart(lineChart, {
    type: "line",
    data: {
        labels: sessionIds,
        datasets: [{
            data: engagementScores,
            borderColor: "#4ade80",
            tension: 0.4,
            fill: false
        }]
    },
    options: {
        scales: { y: { beginAtZero: true, max: 100 } },
        plugins: { legend: { display: false } }
    }
});

// PHONE USAGE BAR
new Chart(phoneChart, {
    type: "bar",
    data: {
        labels: sessionIds,
        datasets: [{
            data: phoneScores,
            backgroundColor: "#f87171"
        }]
    },
    options: {
        scales: { y: { beginAtZero: true, max: 100 } },
        plugins: { legend: { display: false } }
    }
});
</script>

</body>
</html>
